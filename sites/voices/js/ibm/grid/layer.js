/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["ibm.grid.ioc"]){dojo._hasResource["ibm.grid.ioc"]=true;dojo.provide("ibm.grid.ioc");(function(){dojo.declare("ibm.grid.ioc",null,{subscriptions:{"/voices/more":"moreData","/voices/rpc":"rpc","/voices/search":"search","/voices/tt/search":"search"},constructor:function(_1){this._subscriptions=[];this._connects=[];this.config=_1;for(var _2 in this.subscriptions){this._subscriptions.push(dojo.subscribe(this.config.topicPrefix+_2,this,this.subscriptions[_2]));}this.cRequest=this.buildCReq();dojo.addOnUnload(dojo.hitch(this,"destroy"));},destroy:function(){dojo.forEach(this._subscriptions,dojo.unsubscribe);dojo.forEach(this._connects,dojo.disconnect);},send:function(_3){var _4=this;var _5={url:this.config.socketUrl+"&cometRequest="+encodeURIComponent(dojo.toJson(_3)),callbackParamName:"callback",preventCache:true,load:dojo.hitch(this,"onMsg"),error:function(_6){console.error("[IOC] onJSONPError",dojo.toJson(_6));}};return dojo.io.script.get(_5);},onMsg:function(_7){try{if(!_7){return;}var m=typeof _7=="string"?dojo.fromJson(_7):_7;if(!m){return;}if(m.searchResponse){dojo.publish(this.config.topicPrefix+"/feed/procResp",[m]);this.cRequest.action="update";}if(m.status){console.error(dojo.toJson(m));return;}}catch(e){console.error("onMsg: "+dojo.toJson(e));}},search:function(_8){try{this.buildSearch(this.cRequest.searchCriteria,_8);this.cRequest.action="search";this.send(this.cRequest);}catch(e){console.error("Search query failed error="+e+" query="+dojo.toJson(_8));}},searchTT:function(_9){try{this.buildSearch(this.cRequest.searchCriteria,_9);this.cRequest.action="load";this.send(this.cRequest);}catch(e){console.error("Search query failed error="+e+" query="+dojo.toJson(_9));}},rpc:function(_a){var _b={};_b.siteId=this.config.siteId;_b.action="rpc";_b.rpc={};_b.rpc.method=_a.method;_b.rpc.type=_a.type;_b.rpc.id=_a.target;this.send((_b));},moreData:function(_c){var _d=dojo.clone(this.cRequest);_d.action="loadMore";_d.searchCriteria.voices.published=_c.published;_d.searchCriteria.voices.score=_c.score;this.send(_d);},buildCReq:function(){var _e={};_e.siteId=this.config.siteId;_e.searchCriteria={};_e.searchCriteria.noFilter=true;_e.searchCriteria.voices={};_e.searchCriteria.voices.noOfItems=20;this.buildSearch(_e.searchCriteria,this.config.filter);return _e;},buildSearch:function(sc,_f){sc.noFilter=true;sc.filter=sc.fromDate=sc.feeds=null;if(!_f){return;}try{_f=dojo.trim(_f.toLowerCase().replace(/\s+/g," "));if(!_f||_f.length<=0){return;}var _10=_f.split(/\s+/g);var i=0;while(i<_10.length){try{if(_10[i].indexOf("feeds:",0)==0){var _11=_10[i].substr(6);if(_11&&_11.trim().length>0){sc.feeds=_11.trim().split(",");}}else{if(_10[i].indexOf("fromdate:",0)==0){var _11=_10[i].substr(9);if(_11&&_11.trim().length>0){_11=_11.trim()+" 23:59:59";sc.fromDate=dojo.date.locale.parse(_11,{datePattern:"MM/dd/yyyy",timePattern:"HH:mm:ss"}).getTime();sc.fromDate+=10;}}else{if(_10[i].indexOf("keyword:",0)==0){_10[i]=_10[i].replace("keyword:","");}if(sc.filter){sc.filter+=" "+_10[i];}else{sc.filter=_10[i];}}}}catch(e){console.warn("Search string="+_f+" error="+e);}i++;}if(sc.filter){sc.filter=sc.filter.trim();if(sc.filter.length<=0){delete sc.filter;}else{sc.filter=sc.filter.replace(/\s+/g," ");}}if(sc.filter||sc.fromDate||sc.feeds){sc.noFilter=false;}}catch(err){console.error("Filter: "+_f+" error: "+dojo.toJson(err));}}});})();}if(!dojo._hasResource["ibm.grid.widget.konst"]){dojo._hasResource["ibm.grid.widget.konst"]=true;dojo.provide("ibm.grid.widget.konst");ibm.grid.widget.konst={SERVER_BASE:dojo.config.voicesServiceBase,BLOGS:"BLOGS",TWITTER:"TWITTER",VIDEOS:"VIDEOS",ALL:"ALL",GRID:"GRID",LIST:"LIST",IS_MOBILE:dojo.global.navigator?dojo.global.navigator.userAgent.search(/android|ipad|iphone|playbook|rim\ |blackberry|mobile/gi)!=-1:false,isAndroidPhone:function(){return dojo.global.navigator?dojo.global.navigator.userAgent.match(/(Android)(mobile)/gi):false;},isAndroidTablet:function(){if(dojo.global.navigator?dojo.global.navigator.userAgent.match(/Android/i):false){if(!dojo.global.navigator.userAgent.match(/mobile/gi)){return true;}}return false;},isRIM:function(){return dojo.global.navigator?dojo.global.navigator.userAgent.match(/rim/i):false;},isBlackBerry:function(){return dojo.global.navigator?dojo.global.navigator.userAgent.match(/BlackBerry/i):false;},isIOSphone:function(){return dojo.global.navigator?dojo.global.navigator.userAgent.match(/iPhone|iPod/i):false;},isIOStablet:function(){return dojo.global.navigator?dojo.global.navigator.userAgent.match(/iPad/i):false;},isOpera:function(){return dojo.global.navigator?dojo.global.navigator.userAgent.match(/Opera Mini/i):false;},isWindows:function(){return dojo.global.navigator?dojo.global.navigator.userAgent.match(/IEMobile/i):false;},isMobile:function(){if(ibm.voices.widget.konst.isMobilePhone()||ibm.voices.widget.konst.isTablet()){return true;}return false;},isTablet:function(){return (ibm.voices.widget.konst.isAndroidTablet()||ibm.voices.widget.konst.isIOStablet());},isMobilePhone:function(){return (ibm.voices.widget.konst.isAndroidPhone()||ibm.voices.widget.konst.isRIM()||ibm.voices.widget.konst.isBlackBerry()||ibm.voices.widget.konst.isIOSphone()||ibm.voices.widget.konst.isOpera()||ibm.voices.widget.konst.isWindows());}};}if(!dojo._hasResource["ibm.grid.widget.handler"]){dojo._hasResource["ibm.grid.widget.handler"]=true;dojo.provide("ibm.grid.widget.handler");ibm.grid.widget.handler={flag:function(evt){if(evt){dojo.stopEvent(evt);}var _12=new dojo.NodeList(evt.target).closest(".voicesItem")[0];var d=showConfirmDialog("Confirm","Is this content inappropriate?");dojo.when(d,dojo.hitch(this,function(){dojo.fx.wipeOut({node:_12}).play();var msg={type:this.feed.type||"Blogs",target:dojo.attr(_12,"data-id"),method:"flag"};dojo.publish(this.config.topicPrefix+"/voices/rpc",[msg]);}));},visit:function(evt){var a=evt.target.tagName=="A"?evt.target:evt.target.parentNode;},twitterAction:function(evt){if(evt){dojo.stopEvent(evt);}try{var _13=dojo.attr(evt.target,"data-action");if(!_13){_13=dojo.attr(evt.target.parentElement,"data-action");}if(!_13){return;}var _14,_15="dnt=true&count=none",_16={ibmEvGroup:"Twitter"};try{if(this.config){_15=this.config.tQuery;}else{_15=ibm.SMA.config.tQuery;}}catch(ee){}if(_13=="twitter.fav"||_13=="twitter.retweet"||_13=="twitter.reply"){var _17=new dojo.NodeList(evt.target).closest(".voicesItem")[0];var id=dojo.attr(_17,"data-id");var _18=dojo.query(".timelink",_17)[0].href;_16.ibmEvAction=_18||"none";if(_13=="twitter.fav"){_14="//twitter.com/intent/favorite?tweet_id="+id+"&"+_15;_16.ibmEV="Fav";}else{if(_13=="twitter.retweet"){_14="//twitter.com/intent/retweet?tweet_id="+id+"&"+_15;_16.ibmEV="Retweet";}else{if(_13=="twitter.reply"){_14="//twitter.com/intent/tweet?in_reply_to="+id+"&"+_15;_16.ibmEV="Reply";}}}}else{if(_13=="twitter.tweet"){_14="//twitter.com/intent/tweet?"+_15;_16.ibmEV="Tweet";_16.ibmEvAction="none";}else{if(_13=="twitter.profile"){var _19=dojo.attr(evt.target,"data-user-id");if(!_19){_19=dojo.attr(evt.target.parentElement,"data-user-id");}_14="//twitter.com/intent/user?user_id="+_19+"&"+_15;var _17=new dojo.NodeList(evt.target).closest(".voicesItem")[0];_16.ibmEV="Profile";_16.ibmEvAction="none";if(dojo.query(".namelink > strong",_17)[0]){_16.ibmEvAction=dojo.query(".namelink > strong",_17)[0].innerHTML;}else{if(dojo.query(".handlelink",_17)[0]){_16.ibmEvAction=dojo.query(".handlelink",_17)[0].innerHTML;}}}}}if(_14){ibm.grid.widget.handler.openwindow.call(this,_14);}}catch(e){console.error(e);}},twitterProcessContent:function(_1a){try{var _1b=_1a.innerHTML;var _1c=dojo.query(">p",_1a)[0];if(_1c){_1b=_1c.innerHTML;}var tmp=ibm.grid.widget.handler.twitterTextProcess(_1b);_1a.innerHTML="<p>"+tmp+"</p>";}catch(e){console.error("twitterProcessContent - "+dojo.toJson(e));}},twitterTextProcess:function(_1d){try{var tmp=_1d.replace(/(http(s)*\:\/\/[^\s]+\s*)/g,"<a href=\"$1\" data-action=\"new-tab\" target=\"new\">$1</a>").replace(/#([^\s]+)/g,"<a href=\"//twitter.com/search?q=%23$1\" data-action=\"new-tab\" target=\"new\">#$1</a>").replace(/@([^\s:]+)/g,"<a href=\"//twitter.com/$1\" data-action=\"new-tab\" target=\"new\">@$1</a>");return tmp;}catch(e){console.error("twitterProcessContent - "+dojo.toJson(e));}},trimString:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;},prettyDate:function(_1e){var _1f=new Array();_1f[0]="Jan";_1f[1]="Feb";_1f[2]="Mar";_1f[3]="Apr";_1f[4]="May";_1f[5]="Jun";_1f[6]="Jul";_1f[7]="Aug";_1f[8]="Sep";_1f[9]="Oct";_1f[10]="Nov";_1f[11]="Dec";_1f[12]="December";var _20=dojo.attr(_1e,"data-timeval");var _21=new Date((parseInt(_20.trim())||"")),_22=(((new Date()).getTime()-_21.getTime())/1000),_23=Math.floor(_22/86400);if(isNaN(_23)||_23<0){return;}_1e.innerHTML=_23==0&&(_22<60&&"just now"||_22<120&&"1m"||_22<3600&&Math.floor(_22/60)+"m"||_22<7200&&"1h"||_22<86400&&Math.floor(_22/3600)+"h")||_23>=1&&_23+"d";},prettyDateVal:function(_24){var _25=new Array();_25[0]="Jan";_25[1]="Feb";_25[2]="Mar";_25[3]="Apr";_25[4]="May";_25[5]="Jun";_25[6]="Jul";_25[7]="Aug";_25[8]="Sep";_25[9]="Oct";_25[10]="Nov";_25[11]="Dec";_25[12]="December";_24=_24+"";var _26=new Date((parseInt(_24.trim())||"")),_27=(((new Date()).getTime()-_26.getTime())/1000),_28=Math.floor(_27/86400);if(isNaN(_28)||_28<0){return;}var _29=_28==0&&(_27<60&&"just now"||_27<120&&"1m"||_27<3600&&Math.floor(_27/60)+"m"||_27<7200&&"1h"||_27<86400&&Math.floor(_27/3600)+"h")||_28>=1&&_28+"d";return _29;},youtubeAction:function(evt){if(evt){dojo.stopEvent(evt);}try{var _2a=dojo.attr(evt.target,"data-action");if(!_2a){_2a=dojo.attr(evt.target.parentElement,"data-action");}if(!_2a){return;}var _2b="";var _2c=new dojo.NodeList(evt.target).closest(".voicesItem")[0];var _2d=dojo.attr(_2c,"data-id");var _2e=dojo.attr(_2c,"data-channel-id");if(_2a=="youtube.channel"){_2b="//www.youtube.com/channel/"+_2e;}else{if(_2a=="youtube.video"){_2b="//www.youtube.com/watch?v="+_2d;}}window.open(_2b,"_blank");}catch(e){console.error("youtubeAction failed: "+dojo.toJson(e));}},youtubePlay:function(evt){if(evt){dojo.stopEvent(evt);}},showResolvedDetailsonGrid:function(_2f){try{var _30=dojo.attr(_2f,"data-content-type");var _31=dojo.attr(_2f,"data-content-url");var _32=dojo.query(".details",_2f)[0];var _33=dojo.attr(_32,"data-url-content");_33=_33.substring(_33.indexOf("//"));var _34=dojo.attr(_32,"data-media-url");if(!dojo.hasClass(_32,"open")){var _35="";if(_30.indexOf("youtube")>-1){_35="<div class=\"ibm-media\"><div class=\"ibm-video\"><div class=\"ibm-container-body\" dojoattachpoint=\"bodyNode\">"+"<div class=\"ibm-video-container\" dojoattachpoint=\"containerNode\"><object class=\"player\" style=\"height: 293px; width: 270px\">"+"<param name=\"movie\" value=\"${urlContent}\"><param name=\"allowFullScreen\" value=\"true\">"+"<param name=\"allowScriptAccess\" value=\"always\"><embed data-action=\"youtube.play\" width=\"270\" height=\"293\" src=\"${urlContent}\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" allowscriptaccess=\"always\" alt=\"&nbsp;\">"+"</object></div></div></div></div>";_35=dojo.string.substitute(_35,{urlContent:_33});}else{if(_30.indexOf("flickr")>-1){_35="<p class=\"ibm-custom-embed-image\"><a data-action=\"new-tab\" target=\"_blank\" href=\"${url}\">"+"<img alt=\"\" src=\"${urlContent}\"></a></p>";_35=dojo.string.substitute(_35,{urlContent:_33,url:_31});}else{if(_34&&_34!=""){ibm.grid.widget.handler.setMediaImage(_34,_32);}}}_32.innerHTML=_35;}else{_32.innerHTML="";}dojo.query(".channel .blognamelink",_2f).forEach(function(_36){var _37=ibm.grid.widget.handler.processDomain(_36.innerHTML);_36.innerHTML=_37;});dojo.query(".more p a",_2f).toggleClass("on");dojo.toggleClass(_32,"open");}catch(e){console.error("showResolvedDetailsonGrid failed: "+dojo.toJson(e));}},setMediaImage:function(url,_38){var _39=new Image();var _3a=dojo.connect(_39,"load",function(evt){if(evt.target.width>199){_38.innerHTML="<p class=\"ibm-custom-embed-image\">"+"<img alt=\"\" src=\""+url+"\"></p>";}dojo.disconnect(_3a);});_39.src=url;},toggleResolvedDetails:function(evt){if(evt){dojo.stopEvent(evt);}var _3b=new dojo.NodeList(evt.target).closest(".tweetresolved")[0];var _3c=dojo.attr(_3b,"data-action");if(!_3c){_3c=dojo.attr(evt.target.parentElement,"data-action");}if(!_3c){return;}try{var _3d=dojo.attr(_3b,"data-content-type");var _3e=dojo.attr(_3b,"data-content-url");var _3f=dojo.query(".details",_3b)[0];var _40=dojo.attr(_3f,"data-url-content");_40=_40.substring(_40.indexOf("//"));if(!dojo.hasClass(_3f,"open")){var _41="";if(_3d.indexOf("youtube")>-1){_41="<div class=\"ibm-media\"><div class=\"ibm-video\"><div class=\"ibm-container-body\" dojoattachpoint=\"bodyNode\">"+"<div class=\"ibm-video-container\" dojoattachpoint=\"containerNode\"><object class=\"player\" style=\"height: 293px; width: 520px\">"+"<param name=\"movie\" value=\"${urlContent}\"><param name=\"allowFullScreen\" value=\"true\">"+"<param name=\"allowScriptAccess\" value=\"always\"><embed data-action=\"youtube.play\" width=\"520\" height=\"293\" src=\"${urlContent}\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" allowscriptaccess=\"always\" alt=\"&nbsp;\">"+"</object></div></div></div></div>";_41=dojo.string.substitute(_41,{urlContent:_40});}else{if(_3d.indexOf("flickr")>-1){_41="<p><a data-action=\"new-tab\" target=\"_blank\" href=\"${url}\">"+"<img alt=\"\" src=\"${urlContent}\"></a></p>";_41=dojo.string.substitute(_41,{urlContent:_40,url:_3e});}else{_41="<p>${urlContent}&nbsp;<a data-action=\"new-tab\" target=\"_blank\" class=\"blognamelink\" href=\"${url}\">READ MORE</a></p>";_41=dojo.string.substitute(_41,{urlContent:_40,url:_3e});}}_3f.innerHTML=_41;}else{_3f.innerHTML="";}dojo.query(".more p a",_3b).toggleClass("on");dojo.toggleClass(_3f,"open");}catch(e){console.error("toggleResolvedDetails failed: "+dojo.toJson(e));}},toggleViewSelection:function(evt){try{var _42=dojo.attr(evt.target,"data-action");dojo.addClass(evt.target,"selected");if(_42.indexOf("GRID")>-1){var _43=dojo.query(".ibm_cci--ls--toggle--li--list-icon a",dojo.global.window.document)[0];dojo.removeClass(_43,"selected");}else{if(_42.indexOf("LIST")>-1){var _44=dojo.query(".ibm_cci--ls--toggle--li--grid-icon a",dojo.global.window.document)[0];dojo.removeClass(_44,"selected");}}}catch(e){console.error("Error inside toggleViewSelection : "+e);}},processImages:function(_45){try{var _46=dojo.query(".avatar",_45);if(_46[0]&&_46[0].src&&_46[0].src==_46[0].baseURI){dojo.style(_45,"display","none");}else{}}catch(e){console.error("Problem processing images for element : "+_45+" Error: "+e);}},correctRank:function(_47){try{if(_47.innerHTML.length<2){_47.innerHTML="0"+_47.innerHTML;}}catch(e){console.error("Problem correct Rank : "+_47+" Error: "+e);}},shareAction:function(evt){if(evt){dojo.stopEvent(evt);}try{var _48=dojo.attr(evt.target,"data-action");if(!_48){_48=dojo.attr(evt.target.parentElement,"data-action");}if(!_48){return;}if(_48=="twitter.share"||_48=="facebook.share"||_48=="linkedin.share"){var _49=new dojo.NodeList(evt.target).closest(".voicesItem")[0];var _4a=dojo.query(".urlhrefval",_49)[0];var _4b=dojo.attr(_4a,"href");var _4c=dojo.query(".urltitleval",_49)[0];var _4d=_4c.innerHTML;var _4e={ibmEvGroup:"Share"},_4f;if(_48=="twitter.share"){_4f="//twitter.com/intent/tweet?text="+encodeURIComponent(_4d)+" (via@IBMvoices)"+"&url="+encodeURIComponent(_4b)+"&original_referer="+"//www.ibm.com/voices";_4e.ibmEV="Twitter";}else{if(_48=="facebook.share"){_4f="//www.facebook.com/sharer.php?u="+encodeURIComponent(_4b+" "+_4d);_4e.ibmEV="Facebook";}else{if(_48=="linkedin.share"){_4f="//www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(_4b)+"&summary="+_4d;_4e.ibmEV="LinkedIn";}}}ibm.grid.widget.handler.openwindow.call(this,_4f);_4e.ibmEvAction=_4b||"none";_4e.ibmEvLinkTitle=_4d||"none";}}catch(e){console.error("shareAction failed: "+dojo.toJson(e));}},processDomain:function(_50){if(_50.length>25){if(_50.indexOf(".com")>-1){_50=_50.replace(".com","");}if(_50.indexOf("www.")>-1){_50=_50.replace("www.","");}if(_50.indexOf(".net")>-1){_50=_50.replace(".net.","");}if(_50.indexOf(".org")>-1){_50=_50.replace(".org","");}}if(_50.length>20){_50=_50.substring(0,20);}return _50;},openwindow:function(_51){var _52="scrollbars=yes,resizable=yes,toolbar=no,location=yes",_53=550,_54=420,_55=screen.height,_56=screen.width;var _57=Math.round((_56/2)-(_53/2));var top=0;if(_55>_54){top=Math.round((_55/2)-(_54/2));}window.open(_51,"intent",_52+",width="+_53+",height="+_54+",left="+_57+",top="+top).focus();},openNewTab:function(evt){if(evt){dojo.stopEvent(evt);}var _58=dojo.attr(evt.target,"data-action");if(!_58){_58=dojo.attr(evt.target.parentElement,"data-action");}if(!_58){return;}var _59=dojo.attr(evt.target,"href");if(_59==null){_59=dojo.attr(evt.target.parentElement,"href");}window.open(_59,"_blank");},highlightSearchTerms:function(_5a,_5b){var _5c=[];if(_5b&&_5b.indexOf(",")>-1){_5c=_5b.split(",");}else{_5c[0]=_5b;}var _5d="<span class=\"search-term-highlight ${colorClass}\">";dojo.forEach(_5c,function(_5e,i){var _5f="";if(i>0){_5f="colorClass"+i;}var _60=dojo.string.substitute(_5d,{colorClass:_5f})+"$1</span>";var _61="("+_5e.replace(/([{}()[\]\\.?*+^$|=!:~-])/gi,"$1")+")";var _62=new RegExp(_61,"gim");_5a.innerHTML=_5a.innerHTML.replace(/(>[^<]+<)/gim,function(a){return a.replace(_62,_60);});});},handleData:function(msg){var _63=this.config.viewType;var _64=null;if(msg.searchResponse.entries&&msg.searchResponse.entries.length>0){_64=msg.searchResponse.entries;}if((msg.action=="search")&&msg.searchResponse.terms&&msg.searchResponse.terms.length>0){this.searchResCount=msg.searchResponse.totalCount;var _65=dojo.query(".ibm-voices-search-result-count",this.container)[0];if(_65){dojo.place("<p>"+msg.searchResponse.totalCount+" results.</p>",_65,"last");}}try{if(_64){for(var i=0;i<_64.length;i++){try{this.itemsCount=this.itemsCount+1;var _66="";_66=_66+ibm.grid.widget.handler.renderItem.call(this,_64[i]);var _67=dojo.create("div",{innerHTML:_66});if(this.isSearch&&msg.searchResponse.terms&&msg.searchResponse.terms.length>0){this.searchTerms=msg.searchResponse.terms;ibm.grid.widget.handler.highlightSearchTerms(_67,this.searchTerms);_66=_67.innerHTML;}else{this.searchTerms=null;}if(_64[i].rank&&(""+_64[i].rank).length>2){var s3=(dojo.query(".rank",_67)[0]);dojo.addClass(s3,"reducefont");_66=_67.innerHTML;}this._connects.push(this.connect(_66,"onclick","eventHandler"));var _68=this.container;if(_63=="GRID"){var n1=dojo.query(".ibm-voices-grid-one",this.container)[0];var n2=dojo.query(".ibm-voices-grid-two",this.container)[0];var n3=dojo.query(".ibm-voices-grid-three",this.container)[0];var _68=dojo.coords(n2).h<dojo.coords(n1).h?n2:n1;_68=dojo.coords(n3).h<dojo.coords(_68).h?n3:_68;}dojo.place(_66,_68,"last");var _69=dojo.query(".voicesItem",_68);this.lastItem=_69[_69.length-1];if(this.lastItem&&_64[i].type=="URLREF"&&_64[i].refTweets&&_64[i].refTweets.length>1){if(_63=="GRID"){ibm.grid.widget.handler.showResolvedDetailsonGrid(this.lastItem);}ibm.grid.widget.handler.copyRelated(this.lastItem);}dojo.query(".score>.rank>p",this.lastItem).forEach(ibm.grid.widget.handler.correctRank,this);dojo.query(".timelink",this.lastItem).forEach(ibm.grid.widget.handler.prettyDate,this);dojo.query(".thumblink",this.lastItem).forEach(ibm.grid.widget.handler.processImages,this);}catch(e){console.error("Failed to render item, err"+e+" data="+dojo.toJson(_64[i]));}}}}catch(e){console.error("Failed to render, err"+e+" data="+dojo.toJson(msg));}},renderItem:function(_6a){try{var _6b=this.config.viewType;if(_6a.type&&_6a.type=="TWEET"){_6a=this.feed.normalizeTWObj(_6a);var _6c=null;if(_6b=="GRID"){_6c=dojo.string.substitute(this.feed.templates.twitterItemGrid,{data:_6a});}else{_6c=dojo.string.substitute(this.feed.templates.twitterItem,{data:_6a});}return _6c;}else{if(_6a.type&&_6a.type=="URLREF"){var obj={link:_6a.link?""+_6a.link:"",domain:_6a.domain?""+ibm.grid.widget.handler.processDomain(_6a.domain):"",title:_6a.title?""+_6a.title:"",icon:_6a.icon?""+_6a.icon:"",content:_6a.content?""+_6a.content:"",mediaURL:_6a.mediaURL?""+_6a.mediaURL:"",refIds:_6a.refIds?""+_6a.refIds:"",score:_6a.score?""+_6a.score:("0"),reachPct:_6a.reachPct?""+_6a.reachPct:("0"),engmtPct:_6a.engmtPct?""+_6a.engmtPct:("0"),ampPct:_6a.ampPct?""+_6a.ampPct:("0"),reach:_6a.reach?""+_6a.reach:("0"),amp:_6a.amp?""+_6a.amp:("0"),engmt:_6a.engmt?""+_6a.engmt:("0"),rank:_6a.rank?""+_6a.rank:("0"),published:_6a.published?""+_6a.published:parseFloat("0"),refTweets:"",refIds:"",refUsers:"",type:""+_6a.type};var _6d=this.feed.templates.twitterResolvedItem;if(_6b=="GRID"){_6d=this.feed.templates.twitterResolvedItemGrid;}var _6c=dojo.string.substitute(_6d,{data:obj,currDataId:_6a.refTweets[0].id,currPublished:""+_6a.refTweets[0].published,currUserId:""+_6a.refTweets[0].userId,currUserName:""+_6a.refTweets[0].username,currUserScreenName:""+_6a.refTweets[0].userScreenName,currUserAvatar:""+_6a.refTweets[0].userAvatar,currPublishedStr:""+_6a.refTweets[0].publishedStr,currLink:""+_6a.refTweets[0].link,currContent:""+ibm.grid.widget.handler.twitterTextProcess(_6a.refTweets[0].content)});if(_6a.refTweets&&_6a.refTweets.length>1){var _6e=10;if(_6a.refTweets.length<10){_6e=_6a.refTweets.length;}var _6f="<div class=\"row  related-main-div relatedinitialhide\" id=\""+_6a.rank+"-"+_6a.refTweets[0].id+"-relatedTweets\"><ul class=\"relatedTweetContainer\">";for(var xn=0;xn<_6e;xn++){var _70=_6a.refTweets[xn].published+"";var _71="<img class=\"thumb\" alt=\"";if(xn==0){_71="<img class=\"thumb active\" alt=\"";}var _72="<li class=\"relatedTweetitem\" data-link=\""+_6a.refTweets[xn].link+"\" data-rel-id=\""+_6a.refTweets[xn].id+"\" data-sname=\""+_6a.refTweets[xn].username+"\" data-user=\""+_6a.refTweets[xn].userScreenName+"\" data-pub=\""+_70+"\" data-content=\""+_6a.refTweets[xn].content+"\"><a href=\"\" data-user-id=\""+_6a.refTweets[xn].userId+"\" data-action=\"populate.twitter\" class=\"thumblink\">"+_71+_6a.refTweets[xn].username+"\"  src=\""+_6a.refTweets[xn].userAvatar+"\"></img></a></li>";_6f=_6f+_72;}_6f=_6f+"</ul></div>";_6c=_6c+_6f;}return _6c;}else{if(_6a.type&&_6a.type=="BLOG"){_6a=this.feed.normalizeBlogObj(_6a);return dojo.string.substitute(this.feed.templates.blogItem,{data:_6a});}else{if(_6a.type&&_6a.type=="VIDEO"){_6a=this.feed.normalizeYTObj(_6a);var _6c=null;if(_6b=="GRID"){_6c=dojo.string.substitute(this.feed.templates.videoYTItemGrid,{data:_6a});}else{_6c=dojo.string.substitute(this.feed.templates.videoYTItem,{data:_6a});}return _6c;}}}}}catch(e){console.error(e);}return "";},copyRelated:function(_73){var id=dojo.attr(_73,"data-id");var _74=dojo.attr(_73,"data-rank");var _75=dojo.byId(_74+"-"+id+"-relContainer");var _76=dojo.byId(_74+"-"+id+"-relatedTweets");if(_76){dojo.place(_76,_75,"replace");dojo.query(".relatedinitialhide",_73).removeClass("relatedinitialhide");var _77=dojo.query(".tweetitem .tweetchannel .thumblink",_73)[0];if(_77&&!dojo.hasClass(_77,"hideThumblink")){dojo.addClass(_77,"hideThumblink");}}},populateTwitter:function(_78){if(_78){dojo.stopEvent(_78);}try{var _79=new dojo.NodeList(_78.target).closest(".relatedTweetitem")[0];var _7a=dojo.query(".thumblink",_79)[0];var _7b=dojo.query(".thumb",_7a)[0];var _7c=dojo.attr(_7a,"data-user-id");var _7d=dojo.attr(_79,"data-sname");var _7e=dojo.attr(_79,"data-user");var _7f=dojo.attr(_79,"data-pub");var _80=dojo.attr(_79,"data-content");var _81=dojo.attr(_7b,"src");var _82=dojo.attr(_79,"data-link");var _83=dojo.attr(_79,"data-rel-id");var _84=new dojo.NodeList(_79).closest(".voicesItem")[0];dojo.attr(_84,"data-id",_83);var _85=dojo.query(".tweetitem",_84)[0];var _86=dojo.query(".namelink",_84)[0];dojo.attr(_86,"data-user-id",_7c);_86.innerHTML=_7d;var _87=dojo.query(".handlelink",_84)[0];dojo.attr(_87,"data-user-id",_7c);_87.innerHTML="@"+_7e;var _88=dojo.query(".ibm_cci--txttwt > p",_84)[0];_88.innerHTML=ibm.grid.widget.handler.twitterTextProcess(_80);var _89=dojo.query(".ibm_cci-tts .timelink",_84)[0];dojo.attr(_89,"href",_82);dojo.attr(_89,"data-timeval",_7f);_89.innerHTML=ibm.grid.widget.handler.prettyDateVal(_7f);var _8a=dojo.query(".selected",_84);if(_8a){_8a.removeClass("selected");}dojo.addClass(_7b,"selected");if(this.isSearch&&this.searchTerms&&this.searchTerms!=""&&this.searchResCount&&this.searchResCount>0){ibm.grid.widget.handler.highlightSearchTerms(_85,this.searchTerms);}}catch(e){console.error("populateTwitter failed: "+dojo.toJson(e));}},noop:{}};}if(!dojo._hasResource["ibm.grid.widget.controllers.TweetResolvedObj"]){dojo._hasResource["ibm.grid.widget.controllers.TweetResolvedObj"]=true;dojo.provide("ibm.grid.widget.controllers.TweetResolvedObj");dojo.declare("ibm.grid.widget.controllers.TweetResolvedObj",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("ibm.grid.widget.controllers","templates/urlItem.html","\t\t\t\t\t\t<div class=\"voicesItem ibm-col-1-1\" data-rank=\"${data.rank}\" data-action=\"urlresolved.details\" data-id='${currentTweet.id}' data-published=\"${currentTweet.published}\" data-score='${data.score}'>\r\n\r\n\t\t\t\t\t\t\t<!-- LEFT BLOCK (START) -->\t\r\n\t\t\t\t\t\t\t\t<div class=\"ibm-col-6-4\">\r\n\t\t\t\t\t\t\t\t\t<!-- REA SCORE BLOCK (START) -->\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-block\">\r\n\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"ibm_cci--rea-rank\">${!data.position}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li class=\"ibm_cci__padding-top\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b-e\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b\" style=\"width: ${!data.reachPct}%;\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b-e\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b\" style=\"width: ${!data.engmtPct}%;\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b-e\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b\" style=\"width: ${!data.ampPct}%;\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<!-- REA SCORE BLOCK (END) -->\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<!-- RESOLVED URL WITH MULTIPLE TWEETS CONTENT BLOCK (START) -->\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rcb\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci-fav-ihb\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"ibm_cci--feed-icon\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a data-action=\"new-tab\" href=\"${data.link}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img width=\"16\" height=\"16\" alt=\"\"  image\" src=\"${data.icon}\" data-properties=\"siteUserAvatar:src\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<a data-action=\"new-tab\" href=\"${data.link}\" class=\"ibm_cci--feed-title\">${data.domain}</a>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci-sib\">\r\n\t\t\t\t\t\t\t\t\t\t\t<ul class=\"ibm_cci-sie\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"#\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img width=\"16\" height=\"16\" alt=\"\" data-action=\"twitter.share\" type=\"image/svg+xml\" src=\"i/ibm_social_twitter_icon_16x16.svg\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"#\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img width=\"16\" height=\"16\" alt=\"\" data-action=\"facebook.share\" type=\"image/svg+xml\" src=\"i/ibm_social_facebook_icon_16x16.svg\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"#\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img width=\"16\" height=\"16\" alt=\"\" data-action=\"linkedin.share\" type=\"image/svg+xml\" src=\"i/ibm_social_linkedin_icon_16x16.svg\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--ttb\" data-action=\"urlresolved.details\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h2 class=\"ibm_cci--tweet-title\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a data-action=\"new-tab\" href=\"${data.link}\" class=\"urlhrefval urltitleval\">${data.title}</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--tweet-description\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--tweet-content-text\">${data.content}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci-media-container\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<!-- SOCIAL FOR GRID VIEW -->\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci-gv-sib\">\r\n\t\t\t\t\t\t\t\t\t\t\t<ul class=\"ibm_cci-sie\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"#\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img alt=\"\" data-action=\"twitter.share\" type=\"image/svg+xml\" src=\"i/ibm_social_twitter_icon_16x16.svg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"#\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img alt=\"\" data-action=\"facebook.share\" type=\"image/svg+xml\" src=\"i/ibm_social_facebook_icon_16x16.svg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"#\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img alt=\"\" data-action=\"linkedin.share\" type=\"image/svg+xml\" src=\"i/ibm_social_linkedin_icon_16x16.svg\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<!-- SOCIAL FOR GRID VIEW -->\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<!-- RESOLVED URL WITH MULTIPLE TWEETS CONTENT BLOCK (START) -->\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<!-- LEFT BLOCK (END) -->\r\n\t\t\t\t\t\t\t<!-- RIGHT BLOCK (START)  -->\r\n\t\t\t\t\t\t\t\t<div class=\"ibm-col-6-2  tweetitem\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci-rel-tweet-container\">\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<!-- TWEET CONVERSATION DIV (BEGIN) -->\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci-rel-tweet-detils-container\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--lv-rc-th\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci-img-tweet-container\">\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"ibm_cci--lv-rc-title\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" class=\"namelink\" data-user-id=\"${currentTweet.userId}\" data-action=\"twitter.profile\">${currentTweet.userName}</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"ibm_cci--lv-rc-h\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" class=\"handlelink\" data-user-id=\"${currentTweet.userId}\" data-action=\"twitter.profile\">@${currentTweet.userScreenName}</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--time-stamp\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"ibm_cci-tts\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"i/ibm_twitter_timestamp_icon_12x12.png\" alt=\"\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a  class=\"timelink\" alt=\"\" data-action=\"new-tab\" href=\"${currentTweet.link}\" data-timeval=\"${currentTweet.published}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t${currentTweet.published}\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--lv-rc-description ibm_cci--txttwt\">\r\n\t\t\t\t\t\t\t\t\t\t<p>${currentTweet.content}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--lv-rc-sharing\">\r\n\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"javascript:void(0);\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img alt=\"reply\" data-action=\"twitter.reply\" src=\"i/ibm_reply_icon.png\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"javascript:void(0);\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img alt=\"retweet\"  data-action=\"twitter.retweet\" src=\"i/ibm_retweet_icon.png\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a alt=\"\" href=\"javascript:void(0);\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img alt=\"favorite\" data-action=\"twitter.fav\" src=\"i/ibm_favorite_icon.png\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<!-- TWEET CONVERSATION DIV (END) -->\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<!-- RIGHT BLOCK (END)  -->\r\n\t\t\t\t\t\t\t</div>\r\n"),constructor:function(_8b){if(_8b){this.data=this.normalizeObj(_8b);this.setDefaultTweetValues();}},name:"tweetResolvedObj",data:null,currentTweet:{id:"",userName:"",userScreenName:"",userId:"",link:"",content:"",publishedStr:"",published:0},buildRendering:function(){this.inherited(arguments);},startup:function(){this.inherited(arguments);var _8c=dojo.query(".ibm_cci-rel-tweet-container",this.domNode)[0];if(this.data.refTweets&&this.data.refTweets.length>0){this.addRelatedTweets(_8c);}this.applyTwitterCustomChanges();},correctRank:function(){var _8d=dojo.query(".ibm_cci--rea-rank",this.domNode)[0];if(_8d.innerHTML.trim().length>2){dojo.addClass(_8d,"reducedFont");}},normalizeObj:function(obj){obj.reachPct=obj.reachPct?obj.reachPct:"0";obj.engmtPct=obj.engmtPct?obj.engmtPct:"0";obj.ampPct=obj.ampPct?obj.ampPct:"0";obj.userId=obj.userId?obj.userId:"";obj.userAvatar=obj.userAvatar?obj.userAvatar:"";obj.username=obj.username?obj.username:"";obj.userScreenName=obj.userScreenName?obj.userScreenName:"";obj.link=obj.link?obj.link:"";obj.title=obj.title?obj.title:"";obj.content=obj.content?(obj.content):"";obj.publishedStr=obj.publishedStr?obj.publishedStr:"";obj.url=obj.url?obj.url:"";obj.urlSite=obj.urlSite?obj.urlSite:"";obj.urlTitle=obj.urlTitle?obj.urlTitle:"";obj.urlIcon=obj.urlIcon?obj.urlIcon:"";obj.domain=obj.domain?ibm.grid.widget.handler.processDomain(obj.domain):"";obj.source=obj.source?obj.source:"";obj.published=obj.published?obj.published:0;obj.id=obj.id?obj.id:"";obj.score=obj.score?obj.score:0;obj.rank=obj.rank?obj.rank:0;obj.rank_str=obj.rank?(((""+obj.rank).length==1)?"0"+obj.rank:obj.rank+""):"00";obj.position=obj.rank?(((""+obj.rank).length==1)?"0"+obj.rank:obj.rank+""):"00";obj.icon=obj.icon?obj.icon:"";obj.mediaURL=obj.mediaURL?obj.mediaURL:"";obj.layout=obj.layout?obj.layout:ibm.grid.widget.konst.GRID;obj.refTweets=obj.refTweets?obj.refTweets:null;return obj;},destroy:function(){this.inherited(arguments);},setDefaultTweetValues:function(){if(this.data.refTweets&&this.data.refTweets.length>0){var _8e=this.data.refTweets[0];this.currentTweet.id=_8e.id?_8e.id:"";this.currentTweet.userName=_8e.username?_8e.username:"";this.currentTweet.userScreenName=_8e.userScreenName?_8e.userScreenName:"";this.currentTweet.userId=_8e.userId?_8e.userId:"";this.currentTweet.link=_8e.link?_8e.link:"";this.currentTweet.content=_8e.content?_8e.content:"";this.currentTweet.publishedStr=_8e.publishedStr?_8e.publishedStr:"";this.currentTweet.published=_8e.published?_8e.published:0;}},applyTwitterCustomChanges:function(){var _8f=dojo.query(".ibm_cci--txttwt",this.domNode)[0];ibm.grid.widget.handler.twitterProcessContent(_8f);var _90=dojo.query(".timelink",this.domNode)[0];ibm.grid.widget.handler.prettyDate(_90);var _91=dojo.query(".ibm_cci--tweet-content-text",this.domNode)[0];var _92=new dojo.NodeList(_91).closest(".voicesItem")[0];var _93=dojo.query(".urlhrefval",_92)[0];var _94="javascript:void(0);";if(_93){_94=dojo.attr(_93,"href");}if(_91&&_91.innerHTML&&_91.innerHTML.length>170){_91.innerHTML=_91.innerHTML.substring(0,170)+"...<span class=\"ibm_cci--tweet-description-readmore\"><a data-action='new-tab' href='"+_94+"'>&nbsp;Read More</a></span>";}if(this.data.layout==ibm.grid.widget.konst.GRID){dojo.style(_91,"display","none");}else{dojo.style(_91,"display","");}this.correctRank();},addRelatedTweets:function(_95){if(this.data.refTweets&&this.data.refTweets.length>0){var _96=10;if(this.data.refTweets.length<10){_96=this.data.refTweets.length;}var _97="<div class=\"related-main-div\" id=\""+this.data.rank+"-"+this.data.refTweets[0].id+"-relatedTweets\"><ul class=\"relatedTweetContainer\">";for(var xn=0;xn<_96;xn++){var _98=this.data.refTweets[xn].published+"";var _99="<img class=\"thumb\" alt=\"";if(xn==0){_99="<img class=\"thumb selected\" alt=\"";}this.data.refTweets[xn].content=this.data.refTweets[xn].content.replace(/"/g,"&quot;");var _9a="<li class=\"relatedTweetitem\" data-link=\""+this.data.refTweets[xn].link+"\" data-rel-id=\""+this.data.refTweets[xn].id+"\" data-sname=\""+this.data.refTweets[xn].username+"\" data-user=\""+this.data.refTweets[xn].userScreenName+"\" data-pub=\""+_98+"\" data-content=\""+this.data.refTweets[xn].content+"\"><a href=\"\" data-user-id=\""+this.data.refTweets[xn].userId+"\" data-action=\"populate.twitter\" class=\"thumblink\">"+_99+this.data.refTweets[xn].username+"\"  src=\""+this.data.refTweets[xn].userAvatar+"\"></img></a></li>";_97=_97+_9a;}_97=_97+"</ul></div>";_95.innerHTML=_97;}},searchingEventFilters:["onclick","onmousedown","onmouseup","onkeydown","onkeyup","onkeypress"],eventHandler:function(evt){var _9b=dojo.attr(evt.target,"data-action");if(!_9b){_9b=dojo.attr(evt.target.parentElement,"data-action");}if(_9b){if(_9b=="twitter.fav"||_9b=="twitter.retweet"||_9b=="twitter.reply"||_9b=="twitter.profile"){ibm.grid.widget.handler.twitterAction(evt);}if(_9b=="twitter.share"||_9b=="facebook.share"||_9b=="linkedin.share"){ibm.grid.widget.handler.shareAction(evt);}}}});}if(!dojo._hasResource["ibm.grid.widget.controllers.TwitterObj"]){dojo._hasResource["ibm.grid.widget.controllers.TwitterObj"]=true;dojo.provide("ibm.grid.widget.controllers.TwitterObj");dojo.declare("ibm.grid.widget.controllers.TwitterObj",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("ibm.grid.widget.controllers","templates/twitter.html","\t\t\t\t\t\t\t<div class=\"ibm-col-1-1 voicesItem\" data-rank=\"${data.rank}\" data-score='${data.score}' data-id='${!data.id}' data-published=\"${!data.published}\">\r\n\t\t\t\t\t\t\t\t<!-- TWEET BLOCK (START) -->\t\r\n\t\t\t\t\t\t\t\t<div class=\"ibm_cci--lv-unro-b\">\r\n\t\t\t\t\t\t\t\t\t<!-- REA SCORE BLOCK (START) -->\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-block\">\r\n\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"ibm_cci--rea-rank\">${!data.position}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li class=\"ibm_cci__padding-top\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b-e\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b\" style=\"width: ${!data.reachPct}%;\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b-e\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b\" style=\"width: ${!data.engmtPct}%;\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b-e\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--rea-b\" style=\"width: ${!data.ampPct}%;\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<!-- REA SCORE BLOCK (END) -->\r\n\t\t\t\t\t\t\t\t\t<!-- UNRESOLVED URL BLOCK (START) -->\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--unr-cb\">\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div  data-user-id=\"${!data.userId}\" class=\"ibm_cci--lv-rc-th ibm_cci--gv-rc-th\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"ibm_cci--lv-rc-avatar\"  data-user-id=\"${!data.userId}\" src=\"${!data.userAvatar}\" width=\"25\" height=\"25\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"ibm_cci--lv-r-wct\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a  data-user-id=\"${!data.userId}\" data-action=\"twitter.profile\" href=\"#\" alt=\"\">${!data.username}</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"ibm_cci--lv-r-wch\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a  data-user-id=\"${!data.userId}\"  data-action=\"twitter.profile\" href=\"#\">${!data.userScreenName}</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--time-stamp\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"ibm_cci-tts\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>.</span><img width=\"16\" height=\"16\" alt=\"\" src=\"i/ibm_twitter_timestamp_icon_16x16.png\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a class=\"timelink\" href=\"${!data.link}\"  data-action=\"new-tab\"  data-timeval=\"${!data.published}\">${!data.prettyDateVal}</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--ttb\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h2 class=\"ibm_cci--tweet-title\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t${!data.content}\r\n\t\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm_cci--lv-rc-sharing\">\r\n\t\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" alt=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"i/ibm_reply_icon.png\" data-action=\"twitter.reply\" alt=\"reply to tweet\" width=\"16\" height=\"16\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" alt=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"i/ibm_retweet_icon.png\" data-action=\"twitter.retweet\" alt=\"retweet button\" width=\"16\" height=\"16\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" alt=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src=\"i/ibm_favorite_icon.png\" data-action=\"twitter.fav\" alt=\"favorite button\" width=\"16\" height=\"16\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<!-- UNRESOLVED URL BLOCK (START) -->\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<!-- TWEET BLOCK (END) -->\r\n\t\t\t\t\t\t\t</div>\r\n"),constructor:function(_9c){if(_9c){this.data=this.normalizeObj(_9c);}},name:"twitterObj",data:null,buildRendering:function(){this.inherited(arguments);},startup:function(){this.inherited(arguments);dojo.connect(this.domNode,"onclick",this,"eventHandler");this.correctRank();},correctRank:function(){var _9d=dojo.query(".ibm_cci--rea-rank",this.domNode)[0];if(_9d.innerHTML.trim().length>2){dojo.addClass(_9d,"reducedFont");}},normalizeObj:function(obj){obj.reachPct=obj.reachPct?obj.reachPct:"0";obj.engmtPct=obj.engmtPct?obj.engmtPct:"0";obj.ampPct=obj.ampPct?obj.ampPct:"0";obj.userId=obj.userId?obj.userId:"";obj.userAvatar=obj.userAvatar?obj.userAvatar:"";obj.username=obj.username?obj.username:"";obj.userScreenName=obj.userScreenName?obj.userScreenName:"";obj.link=obj.link?obj.link:"";obj.title=obj.title?obj.title:"";obj.content=ibm.grid.widget.handler.twitterTextProcess(obj.content);obj.position=obj.rank?(((""+obj.rank).length==1)?"0"+obj.rank:obj.rank+""):"00";return obj;},destroy:function(){this.inherited(arguments);},searchingEventFilters:["onclick","onmousedown","onmouseup","onkeydown","onkeyup","onkeypress"],eventHandler:function(evt){var _9e=dojo.attr(evt.target,"data-action");if(!_9e){_9e=dojo.attr(evt.target.parentElement,"data-action");}if(_9e){if(_9e=="twitter.fav"||_9e=="twitter.retweet"||_9e=="twitter.reply"||_9e=="twitter.profile"){ibm.grid.widget.handler.twitterAction(evt);}}}});}if(!dojo._hasResource["dojox.fx._core"]){dojo._hasResource["dojox.fx._core"]=true;dojo.provide("dojox.fx._core");dojox.fx._Line=function(_9f,end){this.start=_9f;this.end=end;var _a0=dojo.isArray(_9f),d=(_a0?[]:end-_9f);if(_a0){dojo.forEach(this.start,function(s,i){d[i]=this.end[i]-s;},this);this.getValue=function(n){var res=[];dojo.forEach(this.start,function(s,i){res[i]=(d[i]*n)+s;},this);return res;};}else{this.getValue=function(n){return (d*n)+this.start;};}};}if(!dojo._hasResource["dojox.fx.scroll"]){dojo._hasResource["dojox.fx.scroll"]=true;dojo.provide("dojox.fx.scroll");dojo.experimental("dojox.fx.scroll");dojox.fx.smoothScroll=function(_a1){if(!_a1.target){_a1.target=dojo.position(_a1.node);}var _a2=dojo[(dojo.isIE?"isObject":"isFunction")](_a1["win"].scrollTo),_a3={x:_a1.target.x,y:_a1.target.y};if(!_a2){var _a4=dojo.position(_a1.win);_a3.x-=_a4.x;_a3.y-=_a4.y;}var _a5=(_a2)?(function(val){_a1.win.scrollTo(val[0],val[1]);}):(function(val){_a1.win.scrollLeft=val[0];_a1.win.scrollTop=val[1];});var _a6=new dojo.Animation(dojo.mixin({beforeBegin:function(){if(this.curve){delete this.curve;}var _a7=_a2?dojo._docScroll():{x:_a1.win.scrollLeft,y:_a1.win.scrollTop};_a6.curve=new dojox.fx._Line([_a7.x,_a7.y],[_a7.x+_a3.x,_a7.y+_a3.y]);},onAnimate:_a5},_a1));return _a6;};}if(!dojo._hasResource["ibm.grid.widget._blockerHandler"]){dojo._hasResource["ibm.grid.widget._blockerHandler"]=true;dojo.provide("ibm.grid.widget._blockerHandler");dojo.declare("ibm.grid.widget._blockerHandler",null,{_uiBlocker:null,_loaderGfx:null,_loaderShown:false,showLoader:function(){if(this._loaderShown){return;}var _a8=this;this.hideLoader();this._loaderShown=true;setTimeout(function(){if(_a8._loaderShown){_a8._uiBlocker=_a8._uiBlocker||dojo.create("div",{"class":"blocker"});_a8._loaderGfx=dojo.create("div",{"class":"loader"});_a8.containerNode.appendChild(_a8._uiBlocker);_a8.containerNode.appendChild(_a8._loaderGfx);dojo.animateProperty({node:_a8._uiBlocker,properties:{opacity:{start:0,end:0.75}},duration:500}).play();dojo.animateProperty({node:_a8._loaderGfx,properties:{opacity:{start:0,end:1}},duration:500}).play();setTimeout(function(){_a8._loaderAnimationFrame();},33);}},250);},hideLoader:function(){this._loaderShown=false;if(this._loaderGfx){var _a9=this._loaderGfx;this._loaderGfx=null;dojo.animateProperty({node:_a9,duration:250,properties:{opacity:{end:0}},onEnd:function(){_a9.parentNode.removeChild(_a9);}}).play();dojo.animateProperty({node:this._uiBlocker,duration:250,properties:{opacity:{end:0}},onEnd:function(){var _aa=this.node;_aa.parentNode.removeChild(_aa);}}).play();}},_loaderAnimationFrame:function(){if(this._loaderShown){if(!this._loaderAnimationFrame.angle){this._loaderAnimationFrame.angle=0;}this._loaderAnimationFrame.angle+=45;var rot="rotate("+this._loaderAnimationFrame.angle+"deg)";dojo.style(this._loaderGfx,"-ms-transform",rot);dojo.style(this._loaderGfx,"-moz-transform",rot);dojo.style(this._loaderGfx,"-webkit-transform",rot);dojo.style(this._loaderGfx,"transform",rot);var _ab=this;setTimeout(function(){_ab._loaderAnimationFrame();},1000/5);}}});}if(!dojo._hasResource["ibm.grid.widget.gridView"]){dojo._hasResource["ibm.grid.widget.gridView"]=true;dojo.provide("ibm.grid.widget.gridView");dojo.declare("ibm.grid.widget.gridView",[dijit._Widget,dijit._Templated,ibm.grid.widget._blockerHandler],{id:"ibm_cci-widget-js",feedType:"",configId:"",config:null,srcNodeRef:null,_gridWidth:300,_gutterWidth:20,_columns:0,_choosenPosition:null,_currentPositions:{"position":[{"leftPos":0,"topPos":0,"height":0},{"leftPos":320,"topPos":0,"height":0},{"leftPos":640,"topPos":0,"height":0}]},currentItemCount:0,viewPortWidth:0,mediaURLCount:0,_resizeRequired:true,layout:ibm.grid.widget.konst.GRID,_connects:[],_subscriptions:[],listHeight:0,focusItem:null,resizeTimer:null,resizeDelay:100,topLink:null,_scrollHandle:null,lockScroll:true,moreDataAvailable:false,loadingTemplate:"<span class=\"ibm-spinner-small\" />",gridLoadingTemplate:"<div class=\"ibm-card-data ibm-voices-grid-load-spinner\"><span class=\"ibm-spinner-small\" /></div>",isSearch:false,searchTerms:null,searchResCount:0,constructor:function(_ac){},subscriptions:{"/feed/procResp":"procResp","/voices/tt/search":"onSearch","/feed/done/images":"postImageLoad"},buildRendering:function(){this.domNode=this.srcNodeRef;this.srcNodeRef=null;},startup:function(){this.inherited(arguments);try{this.containerNode=this.domNode;this.setGridDefaults();for(var _ad in this.subscriptions){this._subscriptions.push(dojo.subscribe(this.config.topicPrefix+_ad,this,this.subscriptions[_ad]));}this.loadData();var _ae=dojo.global.window.document.getElementById("ibm_cci--toggle-js");dojo.connect(_ae,"onclick",this,this.changeView);this._connects.push(dojo.connect(window,"onscroll",this,dojo.hitch(this,"handleScroll")));this._scrollHandle=this._connects.length-1;this._connects.push(dojo.connect(dojo.global,"resize",this,this.resizeHandler));this._connects.push(this.connect(this.domNode,"onclick","eventHandler"));var _af=dojo.query("#gototop")[0];this._connects.push(dojo.connect(_af,"onclick",this,function(){dojox.fx.smoothScroll({node:dojo.byId("ibm-com"),win:window,duration:300}).play();}));this.topLink=dojo.byId("gototop");dojo.style(this.topLink,{opacity:0,visibility:"visible"});}catch(e){console.error("Inside startup "+e);}},loadData:function(){try{this.showLoader();this.isSearch=false;this.searchTerms=null;this.searchResCount=0;dojo.publish("/voices/tt/search",[""]);}catch(e){console.error("Inside loadData "+e);}},resizeHandler:function(){var _b0=dojo.window.getBox();if((_b0.w>800&&this._columns!=3)||(_b0.w>480&&_b0.w<801&&this._columns!=2)||(_b0.w<481&&this._columns!=1)){if(this.resizeTimer){clearTimeout(this.resizeTimer);}this._resizeRequired=true;this.resizeTimer=setTimeout(dojo.hitch(this,this.resize),this.resizeDelay);}},resize:function(){try{var _b1=dojo.window.getBox();if(_b1.w<481&&this.layout!=ibm.grid.widget.konst.GRID){this.layout=ibm.grid.widget.konst.GRID;var _b2=dojo.query(".ibm_cci--ls--toggle--li--grid-icon a[data-action=GRID.VIEW]",dojo.global.window.document)[0];var _b3={target:_b2};ibm.grid.widget.handler.toggleViewSelection(_b3);this.switchViewTo("GRID.VIEW");return;}var _b4=this;var _b5=dojo.query(".ibm_cci--newly-added",this.containerNode);if(this.layout==ibm.grid.widget.konst.GRID){if(!(_b5)||(_b5&&_b5.length==0)){_b5=dojo.query(".voicesItem",this.containerNode);this.setGridDefaults();}if(this._resizeRequired){dojo.forEach(_b5,function(ele){_b4.addGRIDElement(ele);if(dojo.hasClass(ele,"ibm_cci--newly-added")){dojo.removeClass(ele,"ibm_cci--newly-added");}});}}else{if(!(_b5)||(_b5&&_b5.length==0)){_b5=dojo.query(".voicesItem",this.containerNode);}if(this._resizeRequired){this.listHeight=0;var _b6=0;dojo.forEach(_b5,function(ele){_b4.addLISTElement(ele);if(dojo.hasClass(ele,"ibm_cci--newly-added")){dojo.removeClass(ele,"ibm_cci--newly-added");}_b6+=dojo.coords(ele).h;dojo.style(_b4.containerNode,"height",""+_b6+"px");});}}if(this.mediaURLCount==0){var _b7=dojo.query(".voicesLoader",this.containerNode);if(_b7){_b7.forEach(function(_b8){dojo.destroy(_b8);});}if(this._loaderShown){this.hideLoader();}}}catch(e){console.error("Inside resize "+e);}},searchingEventFilters:["onclick","onmousedown","onmouseup","onkeydown","onkeyup","onkeypress"],eventHandler:function(evt){var _b9="on"+evt.type;if(dojo.hasClass(this.domNode,"smaSearching")&&(dojo.indexOf(_b9,this.searchingEventFilters)<0)){if(evt){dojo.stopEvent(evt);}return;}var _ba=dojo.attr(evt.target,"data-action");if(!_ba){_ba=dojo.attr(evt.target.parentElement,"data-action");}if(_ba){if(_ba=="flag"){ibm.grid.widget.handler.flag.call(this,evt);}if(_ba=="rss"){ibm.grid.widget.handler.rss.call(this,evt);}if(_ba=="populate.twitter"){ibm.grid.widget.handler.populateTwitter.call(this,evt);}if(_ba=="twitter.fav"||_ba=="twitter.retweet"||_ba=="twitter.reply"||_ba=="twitter.profile"){ibm.grid.widget.handler.twitterAction.call(this,evt);}if(_ba=="visit"){ibm.grid.widget.handler.visit.call(this,evt);}if(_ba=="twitter.share"||_ba=="facebook.share"||_ba=="linkedin.share"){ibm.grid.widget.handler.shareAction.call(this,evt);}if(_ba=="youtube.channel"||_ba=="youtube.video"){ibm.grid.widget.handler.youtubeAction.call(this,evt);}if(_ba=="youtube.play"){ibm.grid.widget.handler.youtubePlay.call(this,evt);}if(_ba=="new-tab"){ibm.grid.widget.handler.openNewTab.call(this,evt);}}},changeView:function(evt){try{var _bb=dojo.attr(evt.target,"data-action");if(_bb&&(_bb.indexOf(this.layout)<0)&&(_bb.indexOf(".VIEW")>-1)){ibm.grid.widget.handler.toggleViewSelection(evt);dojo.query(".voicesItem",this.containerNode).forEach(function(ele){var _bc=dojo.attr(ele,"id");dijit.byId(_bc).destroyRecursive();});if(this.isSearch&&this.searchTerms){dojo.publish("/voices/tt/search",[this.searchTerms]);}else{this.loadData();}this.switchViewTo(_bb);}}catch(e){console.error("Inside startup "+e);}},switchViewTo:function(_bd){try{if(_bd=="LIST.VIEW"){this.layout=ibm.grid.widget.konst.LIST;this.addLISTContainerClass();}else{if(_bd=="GRID.VIEW"){this.layout=ibm.grid.widget.konst.GRID;this.addGRIDContainerClass();}}this._resizeRequired=true;var _be=this;dojo.global.window.setTimeout(function(){_be.resize();_be.lockScroll=false;},500);}catch(e){console.error("Inside switchViewTo "+e);}},showError:function(){console.error("Error while loading the data ");},onSearch:function(msg){try{dojo.addClass(this.domNode,"smaSearching");this.isSearch=true;this.lockScroll=true;this.showLoader();dojo.query(".voicesItem",this.containerNode).forEach(function(ele){var _bf=dojo.attr(ele,"id");dijit.byId(_bf).destroyRecursive();});if(this.layout==ibm.grid.widget.konst.GRID){this.setGridDefaults();}var _c0=dojo.create("div",{innerHTML:"<div class=\"ibm-voices-search-result-count\"></div>"+this.loadingTemplate});dojo.addClass(_c0,"voicesLoader");dojo.place(_c0,this.containerNode,"last");dojo.style(this.containerNode,"height","100%");this.itemsCount=0;}catch(e){console.error("onSearch - "+e);}},procResp:function(msg){if(!msg||!msg.action){return;}try{if(msg.action=="load"||msg.action=="update"||msg.action=="search"||msg.action=="loadMore"){if(msg){var _c1=dojo.query("#ibm_cci-search-result-count",dojo.global.window.document)[0];if(msg.action=="search"&&msg.searchResponse.terms&&msg.searchResponse.terms.length>0){this.searchTerms=msg.searchResponse.terms?msg.searchResponse.terms:null;this.searchResCount=msg.searchResponse.totalCount;if(this.searchTerms){this.searchTerms=this.searchTerms.toLowerCase().replace(/\s+/g," ");_c1.innerHTML="<p>Results found: "+msg.searchResponse.totalCount+"</p>";dojo.style(_c1,"display","");}else{dojo.style(_c1,"display","none");_c1.innerHTML="";this.isSearch=false;this.searchTerms=null;this.searchResCount=0;}}else{if((msg.action=="search"&&!msg.searchResponse.terms)||(msg.action=="loadMore"&&(!this.searchTerms||this.searchTerms==""))){dojo.style(_c1,"display","none");_c1.innerHTML="";this.searchTerms=null;this.searchResCount=0;this.isSearch=false;}}this.onDataCallBack1(msg);if(msg.searchResponse.entries.length==20){this.moreDataAvailable=true;if(this.mediaURLCount==0){this.lockScroll=false;if(!this._scrollHandle){this._connects.push(dojo.connect(window,"onscroll",this,dojo.hitch(this,"handleScroll")));this._scrollHandle=this._connects.length-1;}this.resize();}}else{this.moreDataAvailable=false;if(this.mediaURLCount==0){this.resize();}}}dojo.removeClass(this.domNode,"smaSearching");}}catch(e){console.error("Failed to process response, err : "+e+" data="+dojo.toJson(msg));}},addGRIDContainerClass:function(){try{dojo.removeClass(this.domNode,"ibm_cci-lv__modifier");dojo.addClass(this.domNode,"ibm_cci-gv__modifier");var _c2=dojo.query(".ibm_cci--tweet-content-text",this.domNode)[0];if(_c2){dojo.style(_c2,"display","none");}}catch(e){console.error("Error in addGRIDContainerClass : "+e);}},setGridDefaults:function(){var _c3=dojo.window.getBox();this.viewPortWidth=_c3.w;var _c4=this._columns;if(this.viewPortWidth<481){this._gridWidth=300;this._gutterWidth=0;this._columns=1;this._currentPositions={"position":[{"leftPos":0,"topPos":0,"height":0}]};}else{if((801>this.viewPortWidth)&&(this.viewPortWidth>480)){this._gridWidth=300;this._gutterWidth=60;this._columns=2;this._currentPositions={"position":[{"leftPos":0,"topPos":0,"height":0},{"leftPos":360,"topPos":0,"height":0}]};}else{this._gridWidth=300;this._gutterWidth=20;this._columns=3;this._currentPositions={"position":[{"leftPos":0,"topPos":0,"height":0},{"leftPos":320,"topPos":0,"height":0},{"leftPos":640,"topPos":0,"height":0}]};}}if(!this._choosenPosition){this._choosenPosition=this._currentPositions.position[0];}if((_c4!=this._columns||this.mediaURLCount==0)){this._resizeRequired=true;}else{this._resizeRequired=false;}},calculateLowestPosition:function(){var _c5=this;if(this._currentPositions){dojo.forEach(this._currentPositions.position,function(ele){if((_c5._choosenPosition.topPos+_c5._choosenPosition.height)>(ele.topPos+ele.height)){_c5._choosenPosition=ele;}});}},getHighestLength:function(){var _c6=null;if(this._currentPositions){_c6=this._currentPositions.position[0];dojo.forEach(this._currentPositions.position,function(ele){if((_c6.topPos+_c6.height)<(ele.topPos+ele.height)){_c6=ele;}});}return _c6;},updateCurrentPosition:function(){for(var i=0;i<this._currentPositions.position.length;i++){var ele=this._currentPositions.position[i];if(ele.leftPos==this._choosenPosition.leftPos){this._currentPositions.position[i]=this._choosenPosition;break;}}},addGRIDElement:function(ele){try{var _c7=dojo.coords(ele);this.calculateLowestPosition();this._choosenPosition.height=_c7.h;this.updateCurrentPosition();dojo.style(ele,"display","block");dojo.style(ele,"width",this._gridWidth+"px");dojo.style(ele,"top",""+this._choosenPosition.topPos+"px");dojo.style(ele,"left",""+this._choosenPosition.leftPos+"px");dojo.style(ele,"position","absolute");this.updateMainContainerGRID();this._choosenPosition.topPos=this._choosenPosition.height+this._choosenPosition.topPos;}catch(e){console.error("Error in Add GRID Element method : "+e);}},updateMainContainerGRID:function(){var _c8=this.getHighestLength();var cH=_c8.topPos;if(this._columns==1){cH=_c8.topPos+_c8.height;}cH=(cH>(this._choosenPosition.topPos+this._choosenPosition.height))?cH:(this._choosenPosition.topPos+this._choosenPosition.height);dojo.style(this.containerNode,"height",""+cH+"px");},setMediaImage:function(url,_c9){try{this.mediaURLCount+=1;var _ca=new Image();var _cb=this;var _cc=dojo.connect(_ca,"load",function(evt){var _cd=_cb._gridWidth-30;if(_c9){if(evt&&evt.target&&evt.target.width>199){dojo.place("<img  width=\""+_cd+"\" class=\"ibm_cci--tweet-image\" alt=\"\" src=\""+url+"\">",_c9,"last");}else{if(evt&&evt.target&&evt.target.height>100){dojo.place("<img  class=\"ibm_cci--tweet-image\" alt=\"\" src=\""+url+"\">",_c9,"last");}}}dojo.publish("/feed/done/images",[_c9]);dojo.disconnect(_cc);});var _ce=dojo.connect(_ca,"error",function(evt){dojo.publish("/feed/done/images",[_c9]);dojo.disconnect(_ce);});_ca.src=url;}catch(e){console.error("Inside setMediaImage "+e);}},postImageLoad:function(_cf){try{this.mediaURLCount-=1;if(this.mediaURLCount==0){this.resize();if(this.moreDataAvailable&&this.lockScroll){this.lockScroll=false;}}}catch(e){console.error("Inside postImageLoad "+e);}},setYoutubePlayer:function(url,_d0){var _d1="<div class=\"ibm-media\"><div class=\"ibm-video\"><div class=\"ibm-container-body\" dojoattachpoint=\"bodyNode\">"+"<div class=\"ibm-video-container\" dojoattachpoint=\"containerNode\"><object class=\"player\" style=\"height: 293px; width: 270px\">"+"<param name=\"movie\" value=\"${urlContent}\"><param name=\"allowFullScreen\" value=\"true\">"+"<param name=\"allowScriptAccess\" value=\"always\"><embed data-action=\"youtube.play\" width=\"270\" height=\"293\" src=\"${urlContent}\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" allowscriptaccess=\"always\" alt=\"&nbsp;\">"+"</object></div></div></div></div>";_d1=dojo.string.substitute(_d1,{urlContent:url});_d0.innerHTML=_d1;},addLISTElement:function(ele){try{dojo.removeAttr(ele,"style");dojo.style(ele,"display","");dojo.style(ele,"width","");dojo.style(ele,"top","");dojo.style(ele,"left","");dojo.style(ele,"position","");}catch(e){console.error("Error in Add List Element method : "+e);}},addLISTContainerClass:function(){try{dojo.removeClass(this.domNode,"ibm_cci-gv__modifier");dojo.addClass(this.domNode,"ibm_cci-lv__modifier");var _d2=dojo.query(".ibm_cci--tweet-content-text",this.domNode)[0];if(_d2){dojo.style(_d2,"display","");}}catch(e){console.error("Error in addLISTContainerClass : "+e);}},onDataCallBack1:function(_d3){try{if(_d3.searchResponse.entries){for(var i=0;i<_d3.searchResponse.entries.length;i++){var _d4=_d3.searchResponse.entries[i];var _d5=dijit.byId(_d4.id);if(!_d5){_d4.prettyDateVal=ibm.grid.widget.handler.prettyDateVal(_d4.published);_d4.layout=this.layout;var ele=null;try{if(_d4.type&&_d4.type=="TWEET"){var _d6=new ibm.grid.widget.controllers.TwitterObj(_d4);_d6.startup();ele=_d6.domNode;}else{if(_d4.type&&_d4.type=="URLREF"){var _d7=new ibm.grid.widget.controllers.TweetResolvedObj(_d4);_d7.startup();if(this.layout==ibm.grid.widget.konst.GRID){if(_d4.domain&&_d4.domain.indexOf("youtube")>-1){this.setYoutubePlayer(_d4.content,dojo.query(".ibm_cci-media-container",_d7.domNode)[0]);}else{if(_d4.mediaURL&&_d4.mediaURL!=""){this.setMediaImage(_d4.mediaURL,dojo.query(".ibm_cci-media-container",_d7.domNode)[0]);}}}ele=_d7.domNode;}}}catch(e){console.error("Error in onDataCallBack method : "+e);}if(this.isSearch&&_d3.searchResponse.terms&&_d3.searchResponse.terms.length>0){ibm.grid.widget.handler.highlightSearchTerms(ele,this.searchTerms);}}if(ele){dojo.addClass(ele,"ibm_cci--newly-added");dojo.place(ele,this.containerNode,"last");}}}}catch(e){console.error("Inside onDataCallBack1 while placing the object "+e);}},handleScroll:function(_d8){try{var _d9=this;var _da=dojo._docScroll().y;var max=this.calculateMaxHeight();var _db=this.getScrollOffsets(window);if(max<_db.y&&!this.lockScroll&&!this._loaderShown){this.lockScroll=true;if(this._scrollHandle){dojo.disconnect(this._connects[this._scrollHandle]);this._scrollHandle=null;}max=this.calculateMaxHeight();var _dc=dojo.query(".voicesItem",this.containerNode);var _dd=_dc[_dc.length-1];if(dojo.query(".voicesLoader",this.containerNode).length==0){if(this.layout==ibm.grid.widget.konst.GRID){for(x1=0;x1<this._currentPositions.position.length;x1++){var _de=this._currentPositions.position[x1];var _df=dojo.create("div",{innerHTML:this.loadingTemplate});dojo.addClass(_df,"voicesLoader");dojo.place(_df,this.containerNode,"last");var _e0=_de.topPos;dojo.style(_df,"left",_de.leftPos+"px");dojo.style(_df,"top",_e0+"px");dojo.style(_df,"position","absolute");dojo.style(_df,"height","50px");var _e1=this._gridWidth+this._gutterWidth;dojo.style(_df,"width",""+_e1+"px");}}else{var _df=dojo.create("div",{innerHTML:this.loadingTemplate});dojo.addClass(_df,"voicesLoader");dojo.place(_df,this.containerNode,"last");}}var _e2=dojo.coords(this.containerNode).h;var _e3=_e2+50;dojo.style(this.containerNode,"height",""+_e3+"px");var _dc=dojo.query(".voicesItem",this.containerNode);var _dd=_dc[_dc.length-1];var msg={published:parseInt(""+dojo.attr(_dd,"data-published")),score:parseFloat(""+dojo.attr(_dd,"data-score"))};console.log(msg);dojo.publish("/voices/more",[msg]);console.log("after publish");}var _e4=-dojo.position(dojo.body()).y,_e5=500;if(_e4>_e5){dojo.fadeIn({node:this.topLink,duration:100}).play();}else{dojo.fadeOut({node:this.topLink,duration:100}).play();}}catch(e){console.error("Error in processing HandlScroll : error"+e);}},getScrollOffsets:function(w){w=w||window;if(w.pageXOffset!=null){return {x:w.pageXOffset,y:w.pageYOffset};}var d=w.document;if(document.compatMode=="CSS1Compat"){return {x:d.documentElement.scrollLeft,y:d.documentElement.scrollTop};}return {x:d.body.scrollLeft,y:d.body.scrollTop};},calculateMaxHeight:function(){return (document.documentElement.scrollHeight-document.documentElement.clientHeight)-900;},destroy:function(){this.inherited(arguments);}});}if(!dojo._hasResource["ibm.grid.widget.intro"]){dojo._hasResource["ibm.grid.widget.intro"]=true;dojo.provide("ibm.grid.widget.intro");dojo.declare("ibm.grid.widget.intro",[dijit._Widget],{templateString:dojo.cache("ibm.grid.widget","templates/voicesintro.html","\t\t\t\t\t\t\t<div id=\"aboutvoices\" class=\"closed\">\r\n\t\t\t\t\t\t\t\t<div class=\"ibm-columns intro button\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm-col-1-1 trigger\">\r\n\t\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" id=\"introbtn\">Open/Close</a>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"ibm-columns intro\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm-col-6-4 desc\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm-columns\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm-col-6-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"voicesdesc\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"ibm-columns\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm-col-6-2 introAccounts\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ibm-col-6-2 introContentTypes\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm-col-6-2 desc introImgDescription\">\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"ibm-columns intro\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"ibm-col-1-1 border bottom\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n"),_subscriptions:[],_connects:[],name:"VoicesIntro",subscriptions:{"/feed/procResp":"procResp","/voices/search":"onSearch"},buildRendering:function(){this.inherited(arguments);this.domNode.innerHTML=this.templateString;},startup:function(){this.inherited(arguments);try{console.log("Inside Intro startup");console.log(introText);var xt=dojo.query(".voicesdesc",this.domNode);xt.append(introText.mainintro);xt=dojo.query(".introAccounts",this.domNode);xt.append(introText.accounts);xt=dojo.query(".introContentTypes",this.domNode);xt.append(introText.contenttype);xt=dojo.query(".introImgDescription",this.domNode);xt.append(introText.imgDesc);console.log(xt);var _e6=10000;var _e7=dojo.byId("aboutvoices");var _e8=dojo.byId("introbtn");if(this.readCookie("seenWelcome")){_e7.className="closed";_e8.innerHTML="About";_e8.className="open";}else{_e7.className="";this.createCookie("seenWelcome","yes");_e8.innerHTML="Close";_e8.className="close";}this._connects.push(dojo.connect(_e8,"onclick",dojo.hitch(this,"toggleIntro")));}catch(e){console.error("Intro failed: "+dojo.toJson(e));}},createCookie:function(_e9,_ea){var _eb=new Date();var _ec=new Date(_eb.getTime()+1000*60*60*24*365*10);var _ed=_ec.toGMTString();var _ee="; expires="+_ed;document.cookie=_e9+"="+_ea+_ee+"; path=/";},readCookie:function(_ef){var _f0=_ef+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length);}if(c.indexOf(_f0)==0){return c.substring(_f0.length,c.length);}}return null;},onSearchIntro:function(){this.destroy();},toggleIntro:function(){console.log("inside toggleIntro");try{dojo.toggleClass("aboutvoices","closed");var _f1=dojo.byId("aboutvoices");var _f2=dojo.byId("introbtn");if(_f1.className=="closed"){_f2.innerHTML="About";_f2.className="open";}else{_f2.innerHTML="Close";_f2.className="close";}}catch(e){console.error("Error inside Toggle Intro : "+e);}},destroy:function(){try{dojo.forEach(this._subscriptions,dojo.unsubscribe);dojo.forEach(this._connects,dojo.disconnect);dojo.destroy(this.id);}catch(e){console.log("Error while destroying : "+e);}}});}if(!dojo._hasResource["ibm.grid.widget.trendingTopics"]){dojo._hasResource["ibm.grid.widget.trendingTopics"]=true;dojo.provide("ibm.grid.widget.trendingTopics");dojo.declare("ibm.grid.widget.trendingTopics",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("ibm.grid.widget","templates/trendingTopics.html","\t<ul class=\"ibm_cci__ml ibm-voices-custom-tt-container\">\r\n\t\t<li class=\"ibm_cci__ml_t\">\r\n\t\t\t<p class=\"ibm_cci-clicked\">\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<a href=\"javascript:void(0);\" data-click-item=\"all-reset\">All trending topics</a>\r\n\t\t\t\t</span>\t\t\t\t\r\n\t\t\t\t<input id=\"chk-box-voices-all\" type=\"checkbox\" name=\"tt\" value=\"all\" style=\"display:none;\"/>\r\n\t\t\t</p>\r\n\t\t</li>\r\n\t</ul>\r\n"),topicTemplate:"<li id=\"${topic}-tt-item\" class=\"ibm_cci__ml-li\" data-click-item=\"${topic}-toggleFilter\">"+"<p>"+"<span><a href=\"javascript:void(0);\" class=\"ibm_cci-voices-tt-text\">${topic}</a></span>"+"<a class=\"ibm_cci-voices-tt-close-container\" href=\"#\"></a>"+"<input id=\"chk-box-voices-${topic}\" type=\"checkbox\" name=\"tt\" value=\"${topic}\" style=\"display:none;\"/>"+"</p>"+"</li>",searchItemTemplate:"<li id=\"${topic}-search-item\" class=\"ibm_cci__ml-li\" data-click-item=\"${topic}-removeSearchFilter\">"+"<p>"+"<span><a href=\"javascript:void(0);\" class=\"ibm_cci-voices-tt-text ibm-voices-search-term\">${topic}</a></span>"+"<a class=\"ibm_cci-voices-tt-close-container\" href=\"#\"></a>"+"<input id=\"chk-box-voices-${topic}\" type=\"checkbox\" checked name=\"tt\" value=\"${topic}\" style=\"display:none;\"/>"+"</p>"+"</li>",id:"ibm-voices-trending",trendingTopics:[],searchList:[],trendingTopicString:"",domNode:null,viewType:"LIST",filterString:"",_connects:[],_subscriptions:[],constructor:function(){for(var _f3 in this.subscriptions){this._subscriptions.push(dojo.subscribe(_f3,this,this.subscriptions[_f3]));}},buildRendering:function(){this.domNode=this.srcNodeRef;this.srcNodeRef=null;this.domNode.innerHTML=dojo.string.substitute(this.templateString,{});},startup:function(){this.inherited(arguments);var _f4={"method":"trending","type":"","target":""};dojo.publish("/voices/rpc",[_f4]);this._connects.push(dojo.connect(this.domNode,"onclick",this,dojo.hitch(this,"onFilter")));},initilizeTopics:function(){var _f5=this;dojo.forEach(this.trendingTopics,function(ele){var _f6=dojo.string.substitute(_f5.topicTemplate,{topic:ele});var _f7=dojo.query(".ibm-voices-custom-tt-container",_f5.domNode)[0];dojo.place(_f6,_f7,"last");});},subscriptions:{"/voices/search":"onSearch","/feed/procResp":"procResp"},procResp:function(msg){if(!msg||!msg.action){return;}try{if(msg.action=="rpc"){if(msg.searchResponse.trending){this.trendingTopicString=msg.searchResponse.trending;if(this.trendingTopicString.indexOf(",")>-1){this.trendingTopics=this.trendingTopicString.split(",");}}if(!this.trendingTopics){this.trendingTopics=[];}this.initilizeTopics();}}catch(e){console.error("Error in procResp Trending topics : "+e);}},onSearch:function(msg){if(msg.indexOf(",")>-1){this.searchList=msg.split(",");}else{if(msg!=""){this.searchList[0]=msg;}}if(this.searchList.length>0){for(var x=0;x<this.searchList.length;x++){var _f8=false;var _f9="\\b"+ibm.grid.widget.handler.trimString(this.searchList[x])+"\\b";var _fa=new RegExp(_f9,"gi");var _fb="";var _fc="";var _fd=null;if(!_fa.test(this.filterString)){for(var y=0;y<this.trendingTopics.length;y++){var _fe=ibm.grid.widget.handler.trimString(this.trendingTopics[y]);if(_fa.test(_fe)){_f8=true;_fb=_fe;break;}}var _ff=ibm.grid.widget.handler.trimString(this.searchList[x]);if(!_f8&&_ff!=""){var _100=dojo.query(".ibm-voices-custom-tt-container",this.domNode)[0];var html=dojo.string.substitute(this.searchItemTemplate,{topic:_ff});dojo.place(html,_100,"last");var _101=dojo.query(".ibm_cci__ml-li",this.domNode);var _102=_101[_101.length-1];var _103=dojo.query(">p",_102)[0];dojo.addClass(_103,"ibm_cci-clicked");var _104=dojo.query(".ibm_cci-voices-tt-close-container",_102)[0];dojo.addClass(_104,"ibm_cci-close");this.setFilterString();this.higlightAllTrendingTopics();}else{if(_f8){_fc=""+_fb+"-toggleFilter";_fd=dojo.query("li[data-click-item="+_fc+"]",this.domNode)[0];this.filterModification(_fc,_fd);}}}}}dojo.publish("/voices/tt/search",[this.filterString]);this.searchList=[];},onFilter:function(evt){if(evt){dojo.stopEvent(evt);}try{var _105=evt.target;var _106=dojo.attr(evt.target,"data-click-item");if(!_106){var _107=new dojo.NodeList(evt.target).closest(".ibm_cci__ml-li")[0];_106=dojo.attr(_107,"data-click-item");_105=_107;}if(_106){this.filterModification(_106,_105);dojo.publish("/voices/tt/search",[this.filterString]);}}catch(e){console.error("Search error for filter: "+dojo.toJson(e));}},filterModification:function(_108,_109){try{var _10a=_108.split("-");var _10b=dojo.byId("chk-box-voices-"+_10a[0]);if(_108.indexOf("-toggleFilter")>-1){if(_10b.checked){this.dehighlightTT(_10b,_109);}else{this.highlightTT(_10b,_109);}}else{if(_108.indexOf("-removeSearchFilter")>-1){this.removeSearchTerm(_10a[0]);}else{if(_108.indexOf("-reset")>-1){this.resetAllFilters();}}}this.setFilterString();this.higlightAllTrendingTopics();}catch(e){console.error("filterModification error: "+dojo.toJson(e));}},highlightTT:function(_10c,_10d){try{_10c.checked=true;var _10e=_10d;_10d=dojo.query(">p",_10e)[0];if(!dojo.hasClass(_10d,"ibm_cci-clicked")){dojo.addClass(_10d,"ibm_cci-clicked");var _10f=dojo.query(".ibm_cci-voices-tt-close-container",_10e)[0];if(_10f&&!dojo.hasClass(_10f,"ibm_cci-close")){dojo.addClass(_10f,"ibm_cci-close");}}}catch(e){console.error("Error either checking the checkbox or adding selected class to the element: "+_10d+","+dojo.toJson(e));}},dehighlightTT:function(_110,_111){try{_110.checked=false;var _112=_111;_111=dojo.query(">p",_112)[0];if(dojo.hasClass(_111,"ibm_cci-clicked")){dojo.removeClass(_111,"ibm_cci-clicked");var _113=dojo.query(".ibm_cci-voices-tt-close-container",_112)[0];if(_113&&dojo.hasClass(_113,"ibm_cci-close")){dojo.removeClass(_113,"ibm_cci-close");}}}catch(e){console.error("Error either unchecking the checkbox or removing selected class to the element: "+_111+","+dojo.toJson(e));}},removeSearchTerm:function(_114){dojo.destroy(""+_114+"-search-item");},setFilterString:function(){try{var _115=dojo.query("input[name=tt]:checked",this.domNode);this.filterString="";for(var i=0;i<_115.length;i++){this.filterString+=_115[i].value;if(i<_115.length-1){this.filterString+=",";}}}catch(e){console.error("Somethings wrong when Setting filter string ,"+dojo.toJson(e));}},resetAllFilters:function(){try{var _116=dojo.query("input[name=tt]:checked",this.domNode);for(var i=0;i<_116.length;i++){var _117=new dojo.NodeList(_116[i]).closest(".ibm_cci__ml-li")[0];var _118=dojo.attr(_117,"id");if(_118.indexOf("-tt-item")>-1){action=""+_116[i].value+"-toggleFilter";}else{if(_118.indexOf("-search-item")>-1){action=""+_116[i].value+"-removeSearchFilter";}}this.filterModification(action,_117);}}catch(e){console.error("Somethings wrong when Reseting All filters"+dojo.toJson(e));}},higlightAllTrendingTopics:function(){try{var _119=dojo.query(".ibm_cci__ml_t",this.domNode)[0];var _11a=dojo.query(">p",_119)[0];if(this.filterString==""&&!dojo.hasClass(_11a,"ibm_cci-clicked")){dojo.addClass(_11a,"ibm_cci-clicked");}else{if(this.filterString!=""&&dojo.hasClass(_11a,"ibm_cci-clicked")){dojo.removeClass(_11a,"ibm_cci-clicked");}}}catch(e){console.error("Somethings wrong when Highlighting All Trending topic filters"+dojo.toJson(e));}},destroy:function(){try{dojo.forEach(this._subscriptions,dojo.unsubscribe);dojo.forEach(this._connects,dojo.disconnect);dojo.destroy(this.id);}catch(e){console.error("Error while destroying : "+e);}}});}if(!dojo._hasResource["ibm.grid.widget.vSearchForm"]){dojo._hasResource["ibm.grid.widget.vSearchForm"]=true;dojo.provide("ibm.grid.widget.vSearchForm");dojo.declare("ibm.grid.widget.vSearchForm",[dijit._Widget],{templateString:dojo.cache("ibm.grid.widget","templates/searchFormTemplate.html","\t<form action=\"#\">\r\n\t\t<!-- <label for=\"ibm-custom-search-field\" class=\"ibm-custom-hide-label\" tabindex=\"1\">Search</label> -->\r\n\t\t<input type=\"text\" name=\"ibm-cc-search--field\" id=\"ibm-cc-search--field\" class=\"ibm-cc-search--field\" dojoAttachPoint=\"searchBox\" />\r\n\t\t<input type=\"image\" src='i/ibm_search_icon.png' class=\"ibm-cc-search--icon\" name=\"search button\" value=\"search\" dojoAttachPoint=\"searchButton\" dojoAttachEvent=\"onclick:onSearch\"/>\r\n\t</form>\r\n\r\n\r\n\r\n"),widgetsInTemplate:true,filter:"",searchBox:null,buildRendering:function(){this.inherited(arguments);this.domNode.innerHTML=this.templateString;},startup:function(){this.inherited(arguments);var _11b=dojo.query(".ibm-cc-search--icon",this.domNode)[0];dojo.connect(_11b,"onclick",this,dojo.hitch(this,"onSearch"));},postCreate:function(){this.searchSub=dojo.subscribe("/voices/search",dojo.hitch(this,"displaySearch"));if(!this.searchBox){this.searchBox=dojo.query(".ibm-cc-search--field",this.domNode)[0];}this.searchBox.value=this.filter;},displaySearch:function(msg){try{if(msg){this.searchBox.value="";this.filter="";}}catch(e){console.error("Failed to refresh search box"+dojo.toJson(e));}},onSearch:function(evt){if(evt){dojo.stopEvent(evt);}try{console.log("Search box value : "+this.searchBox.value+" , filter : "+this.filter);if(this.searchBox.value!=this.filter){this.filter=this.searchBox.value;dojo.publish("/voices/search",[this.filter]);}}catch(e){console.error("Search error: "+dojo.toJson(e));}},onFocus:function(evt){console.log("inside onFocus");this._onKeyPressHandle=dojo.connect(window,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ENTER&&this.searchBox.value&&this.searchBox.value!=""){dojo.stopEvent(evt);dijit.focus(this.searchButton);this.onSearch();}});},onBlur:function(evt){if(this._onKeyPressHandle){dojo.disconnect(this._onKeyPressHandle);}},destroy:function(){this.inherited(arguments);if(this._onKeyPressHandle){dojo.disconnect(this._onKeyPressHandle);}}});}if(!dojo._hasResource["ibm.grid.layer"]){dojo._hasResource["ibm.grid.layer"]=true;dojo.provide("ibm.grid.layer");dojo.addOnLoad(function(){ibm.grid.config=config;new ibm.grid.ioc(config);dojo.parser.parse();var vWid=new ibm.grid.widget.gridView({srcNodeRef:document.getElementById("ibm_cci-widget-js"),config:config});vWid.startup();});}
