!function(t,n){n.ns(n,"Common.Widgets.Carousel"),n.ns(n,"Common.Util"),n.Common.Util.getMaxHeight=function(){},n.Common.Util.transitionEndEventName=function(){if(!Modernizr.csstransforms3d)return void 0;var t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",MsTransition:"MSTransitionEnd"},n=document.body||document.documentElement,i=n.style,e;return jQuery.each(t,function(t,n){return void 0!==i[t]?(e=n,!1):void 0}),e},n.Common.Widgets.Carousel=function(n,i){var e={arrows:!1,prevButtonSelector:".ibm-ribbon-prev",nextButtonSelector:".ibm-ribbon-next",scrollContainerSelector:".ibm-ribbon-section",bodyContainerSelector:".ibm-container-body",panelContainerSelector:".ibm-columns",pagesContainerSelector:".ibm-ribbon-pane",paginationContainerSelector:".ibm-ribbon-nav",activePageClass:"ibm-active"};this.config=t.extend({},e,i),this.element=this.getMainElement(n),this.browserDetect(),this.initHtml(),this.initDimensions(),this.initEvents(),this.initMisc()},t.extend(n.Common.Widgets.Carousel.prototype,{initHtml:function(){var n=this;if(this.bodyContainer=this.element.find(this.config.bodyContainerSelector),this.bodyContainer.find(this.config.pagesContainerSelector).length||this.bodyContainer.wrapInner('<div class="ibm-ribbon-pane"><div class="ibm-ribbon-section"></div></div>'),this.config.arrows&&(this.bodyContainer.find(this.config.prevButtonSelector).length||this.bodyContainer.prepend('<a class="ibm-ribbon-prev" role="button" href="#" title="Previous">Previous</a>'),this.bodyContainer.find(this.config.nextButtonSelector).length||this.bodyContainer.append('<a class="ibm-ribbon-next"  role="button" href="#" title="Next">Next</a>')),this.scrollContainer=this.element.find(this.config.scrollContainerSelector),this.pages=this.scrollContainer.children(),!this.bodyContainer.find(this.config.paginationContainerSelector).length){var i='<div class="ibm-ribbon-nav"  role="toolbar">';t.each(this.pages,function(t,n){i+='<a href="#" role="button" aria-controls="ibmweb_ribbon_6_scrollable" tabindex="0">Show carousel 1</a>'}),i+="</div>",this.bodyContainer.append(i)}this.config.arrows&&(this.prevButton=this.element.find(this.config.prevButtonSelector),this.nextButton=this.element.find(this.config.nextButtonSelector)),this.pagesContainer=this.element.find(this.config.pagesContainerSelector),this.paginationContainer=this.element.find(this.config.paginationContainerSelector),this.paginationLinks=this.paginationContainer.children()},initEvents:function(){var n=this;this.config.arrows&&(this.prevButton.on("click",function(t){t.preventDefault(),t.stopPropagation(),n.prev()}),this.nextButton.on("click",function(t){t.preventDefault(),t.stopPropagation(),n.next()})),this.paginationContainer.on("click","a",function(t){t.preventDefault(),t.stopPropagation();var i=n.paginationLinks.index(t.target);n.goToPage(i)}),t(window).resize(function(){n.refreshPanelDimensions()})},initDimensions:function(){this.scrollContainer.css("left","0px"),this.refreshPanelDimensions()},initMisc:function(){if(this.currentPage=0,this.config.arrows){var t=this.pagesContainer.height()/2-this.prevButton.height()/2;this.prevButton.css("top",t+"px"),this.nextButton.css("top",t+"px")}this.toggleArrowVisibility(),this.refreshPagination()},browserDetect:function(){this.useTransitions=Modernizr.csstransforms3d,this.useTransitions&&this.element.addClass("ibm-carousel-css-transitions")},getMainElement:function(n){if(n instanceof jQuery)return n;if("string"==typeof n)return t(n);throw"Carousel constructor must be initialized with a jquery element or selector."},getCurrentSlidePos:function(){return parseInt(this.scrollContainer.css("left").replace("px",""))},refreshPagination:function(){this.paginationLinks.removeClass(this.config.activePageClass).eq(this.currentPage).addClass(this.config.activePageClass)},refreshPanelDimensions:function(){this.panelWidth=this.element.find(this.config.panelContainerSelector+":first").width();var n=this.pages.map(function(n,i){return t(i).height()}),i=Math.max.apply(null,n);this.pagesContainer.height(i)},goToPage:function(t){var i=this,e;this.currentPage=t,this.toggleArrowVisibility(),this.refreshPagination(),e=-((this.panelWidth+20)*t);var o=function(){console.warn("currentPage: "+i.currentPage)};if(this.useTransitions){var s=n.Common.Util.transitionEndEventName();this.scrollContainer.one(s,o),this.scrollContainer.css({left:e})}else this.scrollContainer.animate({left:e},1e3,o)},next:function(){this.goToPage(this.currentPage+1)},prev:function(){this.goToPage(this.currentPage-1)},toggleArrowVisibility:function(){this.config.arrows&&(this.hasPrevPages()?this.prevButton.show():this.prevButton.hide(),this.hasNextPages()?this.nextButton.show():this.nextButton.hide())},hasPrevPages:function(){return this.currentPage>0},hasNextPages:function(){return this.currentPage<this.pages.length-1}})}(jQuery,CHICKENFEED);